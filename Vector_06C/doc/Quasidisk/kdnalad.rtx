    ОПИСАНИЕ КВАЗИДИСКА ПЭВМ "ВЕКТОР 06Ц".

    Квазидиск (электронный диск) - это дополнительное ОЗУ емкостью 256 КБт, предназначенное для работы в составе
ПЭВМ "ВЕКТОР 06Ц". Версия дисковой операционной системы МикроДОS-1 для "ВЕКТОРА 06Ц" с одним электронным  диском 
позволяет работать практически со всем программным обеспечением, разработанным в рамках этой операционной системы.
МикроDOS и сервисные утилиты позволяют записывать программы на квазидиск, копировать, переименовывать, запускать 
их с квазидиска и т.д.                                                                                                       
    На электронном  диске можно одновременно хранить  много программ  (файлов), ограничением  является лишь  его 
емкость (256 КБт). Информация на нем не теряется при выполнении программ, перезапуске компьютера и т.п. Программы
на квазидиске хранятся до выключения питания. После включения питания приходится снова загружать в квазидиск 
МикроDOS и нужные для работы программы - это единственный недостаток электронного диска. Наибольший эффект дает 
использование квазидиска совместно с одним (двумя) дисководами. Для такой конфигурации разработаны несколько опе-
рационных систем (MDOS-2;MDOS-3 и т.д.). Необходимые для работы программы можно очень быстро переписать с дискеты
на квазидиск и затем с ними работать, при этом меньше изнашиваются дисковод и дискета, запуск программ с квазидис-
ка происходит практически мгновенно, как из ОЗУ компьютера.
    Конструктивно квазидиск выполнен в виде двусторонней печатной платы размером 140*150 мм. Память организована 
на 32 корпусах микросхем К565РУ5. Подключается к системной шине "ВЕКТОРА" через 90-контактный раз'ем "ВУ" на зад- 
ней стенке компьютера. Питание +5В электронный диск (ЭД) получает через этот же раз'ем или от отдельного источни-
ка, например от блока питания дисководов.

    Принципиальная схема ЭД состоит из следующих узлов:

1. Регистр инструкции ( D7, D8, D10 ) служит для хранения кода инструкции.

2. Дешифратор адреса порта ЭД ( D1, D2.2 ) формирует строб записи кода инструкции.

3. Дешифратор адресного пространства А000-DFFF ( D5.3, D5.4, D9.3, D9.4 ) обеспечивает формирование сигнала при 
   обращенмм центрального процессора в это адресное пространство.

4. Переключатель блоков (линеек ОЗУ ЭД) - ( D11 ).

5. Формирователь сигналов CAS, WE для м/с ОЗУ ( D6 ).

6. Формирователь сигнала БЛК ( D2.1 ). Активный уровень сигнала ( =1 ) означает выборку ЭД.

7. ОЗУ ЭД представляет собой м/с К565РУ5 ( 32 шт.).

8. Буфер шины данных ( D12, D13 ) служит для двунаправленной передачи данных.

9. Узел обрамления ОЗУ ЭД:
                - повторитель адреса (D3, D4, R7 - R14 );
                - повторитель RAS ( D9.1, D9.2 ).

                Таблица прошивки формирователя сигналов CAS, WE:

                     ____________________       
                     !! 00  08  10  18 !!
                     !!________________!!
                     !! FE  FA  F6  FE !!
                     !! FE  FE  FE  FE !!
                     !! 7C  7A  76  6E !!
                     !! 7E  7E  7E  7E !!
                     !! DC  DA  B6  AE !!
                     !! FE  FE  FE  FE !!
                     !! FC  FA  F6  EE !!
                     !! FE  FE  FE  FE !!
                     !!________________!!

                                                        = 1 =  
               ПРОВЕРКА И НАЛАДКА ЭД.

    Для проверки и наладки ЭД понадобится осиллограф, имеющий вход внешней синхронизации, тестер для измерения
токов и напряжений, программа KDNALAD.COM и TNESTKD.COM.
    Наладку ЭД необходимо начать с проверки правильности монтажа и перемычек между выводами м/с. Тестером прове-
рить отсутствие короткого замыкания между шиной +5В и 0В, а также качество пайки и правильности разводки токопро-
водящих дорожек. Щупами тестера касаться необходимо ножек м/с, что улучшает надежность проверки.
    Подключите ЭД к БПЭВМ, включите питание и замерьте напряжение на шине +5В, если оно отличается от требуемого,
то  отрегулируйте его на блоке питания (желательно при этом проверить потребляемый ЭД ток = 0.55А ).
    Нажмите ВВОД + БЛК на БПЭВМ. Если появится обычная карта загрузки, то это хороший признак! Значит ЭД не меша-
ет работе компьютера.
    Если карта не появилась, то проверьте на замыкание с 0В контакты АС36 и АС39 на раз'еме "ВУ". Проверить ос-
циллографом или логическим пробником сигнал БЛК ( контакт AC38 ), который должен быть =1, в противном случае про-
верьте сигналы на входах формирователя сигнала БЛК ( на входах 03 и 04 D2.1 должен быть уровень =0, т.к. регистр
управляющего слова обнулен).
    После появления карты загрузки подключите к контакту 08 D1 вход "внешняя синхронизация" осциллографа и загру-
зите программу KDNALAD.COM и запустите ее на выполнение. Экран должен очиститься и в верхней части должны поя-
виться четыре одинаковых группы точек:

      * * * *         * * * *         * * * *         * * * *
       * * * *         * * * *         * * * *         * * * *


      * * * *         * * * *         * * * *         * * * *
       * * * *         * * * *         * * * *         * * * *
  
    Верхние две строчки показывают код, который должен записываться в блок ( линейку из м/с К565РУ5 ), а вторые две
( нижние ) показывают код, который считывается из того же блока.
    Если все четыре группы соответствуют рисунку, то остается проверить осциллографом адресные сигналы, поступающие 
на ЭД. Для этого проверьте сигналы на резисторах R7 - R14. Им должны соответствовать сигналы после адресных повто-
рителей. Затем проверьте сигналы непосредственно на входах м/с К565РУ5.
    Приступаем к проверке регистра "управляющего слова" (РУС).
В момент =t0 в РУС записывается код 55H (01010101), поступающий с ШД7...ШД0. Если выход какого-либо сигнала не соот-
ветствут, то необходимо проверить:
    а) сигналы, поступающие по ШД на входы триггеров;
    б) наличие сигнала =1 на входах R триггеров;
    в) на входах C триггеров должен быть сигнал, выдаваемый с 08 D1.
В момент =t1 в РУС записывается код 0AAH, то есть инверсный от 55H.
    Произведем проверку записи и считывания ОЗУ ЭД.
В момент =t2-t3 происходит запись в РУС кода 10H (режим "как в стек" с обращением к 4 блоку). Затем выполняется ко-
манда PUSH - запись в блок ОЗУ ЭД кодов 55H и 0AAH. В момент ее выполнения на выходе 06 D2 должен появиться сигнал,
инверсный от сигнала "стек" на контакте A40 раз'ема "ВУ". 
    Запись в К565РУ5 производится в режиме "считывание-модификация-запись", и на выходах этих м/с в эти моменты вре-
мени появляется сигнал, соответствующий сигналу на входах. Если эти сигналы не тождественны, то необходимо проверить
не закорочены ли входы м/с ОЗУ ЭД с другими сигналами, если замыканий нет, то, возможно, неисправна м/с.
    После команды PUSH выполняется команда POP. При этом на шину данных раз'ема (ШД7-ШД0) в момент низкого уровня
=0 на 15 D2, D13 поступают данные, выдаваемые блоком ОЗУ ЭД.
    В интервалах t3-t4, t4-t5, t5-t6 происходит выполнение операций, анологичные описанных выше.
    Проверим дешифратор адресного пространства. В интервале t6-t7 происходит запись в РУС кода 23H (режим "как ОЗУ"
с обращением к первому блоку). Затем выполняется команда STA 0A000H. На выходе 06 D2 должен появиться сигнал с уров-
нем "лог.0", инверсным от сигнала с выхода 08 D9. Если сигнал на 06 D2 не появился, то проверить м/с D2, D9.3, D9.4,
D5.3, D5.4.
    После того, как вы добились, что все группы точек на экране соответствуют приведенному рисунку, загрузите прог-
рамму проверки м/с ОЗУ ЭД TESTKD.COM. Эта программа выявляет отказы работы м/с ОЗУ динамического типа, т.е. отклоне-
ния в динамических параметрах ИМС ОЗУ, наводки на шины и др., а также статического типа - выявление отказа ОЗУ с точ-
ностью до одной микросхемы.
    Для устранения наводок полезно у каждой м/с ОЗУ установить конденсаторы фильтра емкостью 0.068 - 0.1 Мкф. Иногда
для устранения сбоев полезно поднять напряжение питания до 5.25В.
                                                   = 2 =  
              ПРОГРАММИСТУ ОБ ЭЛЕКТРОННОМ ДИСКЕ.

    Для работы с ЭД программисту необходимо знать:
 - при работе OS МикроDOS обЪем ОЗУ распределяется следующим образом:
        234 КБт  ОЗУ пользователя;
         16 КБт  "подэкранное ОЗУ";
          2 КБт  каталог.
 - доступ к ЭД осуществляется через порт 10H, в этот порт записывается 
   байт, определяющий режим доступа к ЭД и номер одного из четырех 64-кило-
   байтных блоков, к которому осуществляется доступ.
        Структура управляющего байта:
       D7 D6 D5 D4 D3 D2 D1 D0
   где:
D1, D0 - биты, которые задают номер блока при обращении к ЭД "как ОЗУ";
D3, D2 - биты, которые задают номер блока при обращении к ЭД "как стек";
D4 - указывает на включение/выключение режима ЭД "как стек";
        1 - режим включен;
        0 - режим выключен;
D5 - указывает на включение/выключение режима ЭД "как  ОЗУ";
        1 - режим включен;
        0 - режим выключен;
D7, D6 - не используются.
    
    В режиме "как ОЗУ" (D5=1, D4=0) в адресное пространство A000-DFFF
процессора БПЭВМ подключается память соответствующего блока ЭД, то есть
при обращении к этим адресам данные будут записываться в ОЗУ ЭД, а не
в ОЗУ компьютера.
    В режиме "как стек" (D5=0, D4=1) при выполнении команд, обращаю-
щихся к стеку, данные будут выбираться из ОЗУ ЭД, а не БПЭВМ. Таким об-
разом, для полного использования ОЗУ ЭД необходимо использовать режим
"как стек".
    Если установлены оба режима (D5=1,D4=1), то при выполнении стековых
операций в адресах A000-DFFF доступ будет обеспечен к блоку, который
задан разрядами D3, D2.
    Номер 64-килобайтного блока задается инверсно, то есть:
        11В - блок 0
        10В - блок 1
        01В - блок 2
        00В - блок 3

    Пример:
        стандартная конфигурация МикроDOS работает в режиме 23H или
        00010011В, что означает нулевой блок ЭД, рваботающий в режи-
        ме "как ОЗУ".
