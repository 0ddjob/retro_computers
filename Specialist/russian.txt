Специалист

Год:	1987
ОЗУ:	48 кБ
ПЗУ:	2 - 16 кБ
Проц:	К580ВМ80А 2 MГц
Видео:	384x256x2, 384x256x5, 384x256x8
Группа:	Специалист

Специалист это советский любительский компьютер. Он появился в виде схем,
печатных плат и 16-ричных дампов в журнале Моделист Конструктор 1987-2.
Радиолюбители должны были собрать компьютер самостоятельно. Чуть позже заводы,
кооперативы, институты начали выпуск своих Специалистов.

Схему Специалиста опубликовали на год позже любительского компьютера Радио 86РК.
Специалист содержал чуть больше микросхем, но зато содержал меньше редких и
дорогих микросхем, например, Специалисту не нужны КР580ВГ75, КР580ВТ57, а ПЗУ
КР573РФ2 в Специалисте всего одна. Специалист состоит из ~26 маленьких микросхем
серий К155, К589, К140; трех больших микросхем КР580ВМ80А, КР572РФ2, КР580ВВ55А;
и 16-24 микросхем памяти К565РУ3/РУ6. Вместо 24-х микросхем К565РУ6 можно
установить 8 микросхем К565РУ5. Но главное отличие Специалиста от Радио 86РК,
это то, что Специалист мог показывать графику. По моему личному мнению,
Специалист это 8 битный компьютер с лучшей схемотехникой. Лучшей, потому что
простой и позволяющей получить от процессора максимум.

*** ПЗУ *** 

После включения компьютера или перезагрузки на черном экране отображается
приветствие: "PROGRAM ?" или "ПРОГРАММА ?". Компьютер ждет загрузки программы
с магнитной ленты.

Существуют заводские компьютеры с единственной микросхемой ПЗУ КР573РФ2. Такой
компьютер может только лишь загружаться с магнитной ленты. И некоторые программы
не запустятся на компьютере с одной ПЗУ. В такой компьютер надо установить
вторую ПЗУ с программой "Монитор версии 2". Версия 2 это наиболее совместимая
с существующими программами версия Монитора.

Если у вас установлена ПЗУ с Монитором, то нажав клавишу F1 (или любая F1 - 
F10), а затем ENTER, вы запустите Монитор. Команды Монитора описаны на отдельной
страницы Монитор версии 1 или Монитор версии 2.

*** Графика ***

У компьютера единственный графический режим 384x256 2 цвета*. Это очень удачное
разрешение, потому что пиксель почти квадратный, разрешение соответствует
максимальному разрешению цветного телевизора и в строке можно разборчиво
нарисовать 64 символа, что достаточно для комфортной работы с текстами.

Видеопамять устроена очень просто. Байт по адресу 9000h кодирует 8 первых точек
в первой строке экрана. Байт по адресу 9001h кодирует 8 первых точек во второй
строке, а байт по адресу 9100h кодирует точки с 8 по 16 в первой строке и т.д.
Старшие биты располагаются слева. Установленный бит это светлая точка.

Чуть позже для Специалиста была опубликована простая и гениальная доработка,
позволяющая выводить цветную графику. Графические режимы 384x256 5 цветов и
384x256 8 цветов. В обоих режимах есть ограничение, в блоке 8x1 пиксели могут
быть только двух цветов, один из которых черный. В компьютер добавлялось всего
6 микросхем. Вывод цветной графики был не значительно медленнее черно-белой.
Адресное пространство оставалось прежним. Сохранялась полная совместимость с
существующими черно-белыми программами. Было не сложно доработать существующие
черно-белые программы до цветных.

Принцип работы этой с доработкой прост. В трёх неиспользуемых битах системного
порта появляется порт цвета. Если в него записать код красного цвета, то после
этого вся графика выводимая на экран будет красной.

В журнальном расширении нет возможности из программы прочитать цвет точки, что
не позволяет самым простым алгоритмом (копированием видеопамяти) выполнить
прокрутку цветного экрана. Это было сделано ради удешевления схемы.

В большинстве компьютеров того времени процессор тормозит видеоадаптер. Они оба
обращаются к оперативной памяти. Когда обращение происходит одновременно, то
процессор ждет, пока не освободится память.

Особенностью Специалиста является то, что процессор не тормозится
видеоадаптером. Процессор работает на максимальной скорости, а программист с
точностью до такта процессора знает время выполнения программы.

Как же в Специалисте решили конфликт видеоадаптера и процессора? Видеоадаптер
всегда делает две попытки чтения из памяти подряд, одного и того же адреса. Одна
из попыток всегда удачная, потому что процессор КР580ВМ80 никогда не обращается
к памяти два раза подряд.

Частота процессора и памяти 2 МГц. Видеоадаптер делая два попытки подряд читает
данные из памяти со скоростью 1 МГц. Скорость чтения 1 МГц нам дает разрешение
384 пикселя в ширину (1 МГц / 15625 Гц * 0,75 * 8 = 384 бит).

При таком подходе получается, что разрешение экрана зависит от частоты
процессора. Если бы частота процессора была 2.5 МГц, то разрешение было бы 480
пикселей. При частоте 2.66 МГц разрешение было бы 512 пикселей в ширину.

*** Клавиатура ***

У Специалиста необычный, даже провокационный способ работы с клавиатурой.
Клавиши клавиатуры объединены в матрицу, как обычно бывает, но способ работы с
этой матрицей кнопок уникальный.

В большинстве других компьютеров напряжение подаётся на колонки матрицы, а со
строк считывается информация о нажатых клавишах. Или наоборот, напряжение
подаётся на ряды матрицы, а с колонок считывается сигнал. Компьютер
последовательно подает "0" на каждый ряд, когда на всех остальных рядах "1".
Между выходами микросхемы и рядами стоят защитные диоды, которые предотвращают
короткое замыкание между выходами микросхемы, когда пользователь нажимает
несколько клавиш одновременно. Без диодов нажатые клавиши соединили бы два
выхода микросхемы, соединили бы "0" и "1", что недопустимо. Строки матрицы
подтянуты резисторами к питанию и при считывании все не нажатые клавиши
считываются как "1".

В Специалисте же защитных диодов нет, а матрица кнопок подключена к
параллельному порту КР580ВВ55А, который программно может изменять режим:
вход/выход. BIOS компьютера при сканировании клавиатуры сначала подаёт "0" на
все ряды, считывая колонки. А затем подает "0" на все колонки, считывая ряды.
Так как микросхема на все выходы подаёт "0", то и замыкание ей не страшно.
Строки и ряды матрицы подтянуты резисторами к питанию и при считывании все не
нажатые клавиши считываются как "1". Всего за два обращения к клавиатуре драйвер
клавиатуры определяет нажатую клавишу.

Но такой способ чтения не позволяет распознать более одной нажатой клавиши, если
нажатые клавиши не находятся в одном ряду или столбце. Если же программист решит
применить стандартный способ, позволяющий распознать больше нажатых клавиш, т.е.
выполнить проверку каждого ряда отдельно, то тем самым он может вывести из строя
компьютер. Это в теории, а на практике микросхема КР580ВВ55А переживает такое.

*** Доработки ***

Для Специалиста разработано множество улучшений. Многие фирмы расширяли
компьютер по своему, не беспокоясь о совместимости и документации. Я же
перечислю наиболее известные расширения.

Лично я считаю следующим поколением компьютера Специалист любительский компьютер
Орион 128. В основном он повторяет схемотехнику Специалиста, но у него стало
больше оперативной памяти, два графических режима, процессор работает на частоте
2.5 МГц. Из-за повышения скорости процессора изображение занимает не весь экран.
В Орионе появилась возможность прочитать цвет точки из программы, использовать
цветную видеопамять для хранения данных, но при этом скорость вывода графики
стала значительно медленнее. Прямой совместимости у Специалиста и Ориона нет.

Я разработал два расширения для Специалиста:

* Подключение PS/2 клавиатуры.
* Подключение SD карты.

