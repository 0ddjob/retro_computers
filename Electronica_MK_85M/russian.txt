Электроника МК-85

Год	1986
ОЗУ	2 - 6 кБ
ПЗУ	16 кБ
Проц	Т36ВМ1-2 1 МГц
Текст	12x1x2
Графика	60x7x2
В ПЗУ	Бейсик

Электроника МК-85 это советский портативный компьютер. Кратко его можно описать
так: до 220 часов работы от аккумулятора, 16 битный процессор с системой команд
PDP-11, ОЗУ объемом 2 или 6 килобайт, жидкокристаллический экран на 12 символов
и встроенный Бейсик.

Микрокомпьютер выпускался рекордное время и на него был спрос. Он поступил в
продажу в 1986 году. Это самое начало эры промышленно выпускаемых домашних
компьютеров: БК0010, Радио 86РК, Корвет, Поиск, Вектор... Причем, Электроника
МК-85 стоила дешевле любого компьютера, всего 145 рублей. Она была с нами с
самого начала и выпускалась до 2000-х годов, когда советские домашние компьютеры
были забыты, а на наших столах стояли компьютеры с процессорами Пентиум или
Cелерон, появился интернет, 3D ускорители, компакт диски, цифровая музыка и
фильмы.

Компьютер выполняет программы на Бейсике и хоть это было не предумотрено
разработчиками, но еще и в машинном коде. Запуск собственного машинного кода
стал возможен благодаря ошибке в подпрограмме обработки нажатия кнопки [AC].
Подключить МК-85 к компьютеру или каким либо внешним устройствам невозможно, так
как у компьютера нет ни одного внешнего информационного разъёма. Проблема не в
электронике, как раз в схеме компьютера был предусмотрен внешний разъем, просто
разъем не был установлен и не поддержан программно. Все программы и данные
вводятся с клавиатуры и хранятся в памяти компьютера, пока не разрядится
аккумулятор.

На дисплее отображается 12 символов, символ состоит из матрицы точек 5x7. Бейсик
позволяет выводить на экран не только цифры и буквы, но и собственные символы и
даже графику. Но на дисплее между символами есть промежутки, поэтому вывести
слитную графику в разрешении 60x7 не получится.

Внутри МК-85 установлен 16-битный процессор совместимый с системой команд
PDP-11. Установлено 6 Кб оперативной памяти. Это в модели МК-85М, а в модели
МК-85 было всего 2 Кб. Модель МК-85 можно доработать до МК-85М впаяв две не
установленные на заводе микросхемы памяти. В компьютере установлено ПЗУ объемом
16 Кб содержащее программу калькулятора, интерпретатор Бейсика и программу
самодиагностики. Это очень хорошие характеристики для карманного компьютера,
это почти БК0010.

Компьютер может работать в режимах: экономии и турбо. В режиме экономии
компьютер потребляет до 20 мВт и может работать от аккумулятора от 80 до 220
часов. Для запуска в турбо режиме, надо перезагрузить микрокомпьютер с зажатой
клавишей +. Само собой, аккумулятор разрядится значительно быстрее. Тактовая
частота процессора в режиме турбо составляет 2 МГц, что сравнимо с настольными
компьютерами того времени.

Запустить программу самодиагностики можно из Бейска введя команду TEST, но
учтите, что эта команда удалит все программы сохраненные в ОЗУ. А введя команду
WHO вы узнаете кто разработал программу компьютера.

Схема МК-85 крайне проста, всего несколько микросхем: процессор, чипсет
(контроллер клавиатуры, параллельный порт, дешифратор адресов), статическое ОЗУ,
ПЗУ, контроллер ЖК дисплея. Во второй версии схемы процессор и чипсет объединили
в одном корпусе.

Выпускались версии МК-85 содержащие в ПЗУ специальные программы. Например,
Электроника МК-85Б и Электроника МК-85С вместо Бейсика содержали программы
шифрования.

*** Немного о разработчиках ***

Микрокомпьютер разработан в НИИ Точной Технологии, который сейчас называется
Ангстрем. За редким исключением НИИ ТТ единственный мог выпускать собственные
процессоры и микросхемы для домашних компьютеров. НИИ ТТ разработал популярные
16-битные персональные компьютеры ДВК, БК001x и УКНЦ. В них так же
использовались собственные процессоры и специализированные микросхемы.

У НИИ ТТ были очень крутые технологии и возможности, но свободы у НИИТТ было
мало. До 1980-х они выпускали компьютеры собственной архитектуры (НЦ) и
процессоры с собственной системой команд. Но примерно в 1980 году разработчикам
сказали - все ваши компьютеры в мусор, теперь вы будете делать клоны компьютеров
PDP-11 американской фирмы DEC.

Разработчики не стали копировать компьютеры, микросхемы и процессоры. Может быть
им было стыдно, может быть амбиции, а может быть было проще переделать
существующие компьютеры. В самые короткие сроки, буквально за год, НИИ ТТ
изменил микропрограмму своих процессоров так, что бы процессоры смогли выполнять
программы для PDP-11.

Что такое микропрограмма? Если говорить по простому, то большинство процессоров
работает на собственном языке программирования с очень простыми командами. На
этом языке программирования написан эмулятор другого процессора. Например, в
системе команд X86 есть команда умножения. Одна команда - одно умножение. Но
никаких электронных блоков умножения в процессоре 8086 нет. Процессор умножает
по программе, т.е. микропрограмме содержащей команды сложения, сдвиги, условия
и циклы. Поэтому процессору 8086 требуется 118-133 тактов для выполнения одной
команды умножения.

Так как процессор НИИ ТТ изначально не затачивался под систему команд PDP-11, а
уже после разработки был переделан, то и производительность получилась ниже
процессора фирмы DEC. Но зато НИИ ТТ смогли поместить весь процессор в одну
микросхему. Процессор фирмы DEC представлял собой несколько микросхем.

Затем, в 1984 году разработчикам показали карманный компьютер Casio FX-700P и
сказали - что бы у меня на столе лежал такой же советского производства!
Перечить руководству было нельзя, через год на стол лег микрокомпьютер внешне
идентичный Casio, но изнутри... То ли разработчикам НИИТТ было стыдно заниматься
копированием, то ли хотелось сделать что то своё, то ли найти применение
собственному процессору способному сутками работать от часовых батареек. На
столе лежал советский Casio, даже Бейсик был похож, даже работать с ним можно
было по документации от Casio. Но внутри компьютера всё сделали по своему.
Установили собственные микросхемы, собственный экономичный 16-битный процессор
с навязанной системной команд PDP-11. И в 1986 году компьютер поступил в
продажу.

*** Пример программы ***

* 1 PRINT "Змейка": DEFM 420
* 10 VAC: G=-1: A=1: C=26: D=3: X=30: Y=3
* 20 FOR I=0 TO 4: DRAW 26+I,3: Z(206+I)=A: NEXT I:
* 30 G=G+1
* 40 E=INT(RAN#*59): F=INT(RAN#*6): IF Z(E+60*F)>0 THEN 40
* 50 DRAW E,F
* 60 GOTO 55+A*10
* 65 X=X+1: IF X=60 THEN 500
* 67 GOTO 100
* 75 Y=Y+1: IF Y=7 THEN 500
* 77 GOTO 100
* 85 X=X-1: IF X=-1 THEN 500
* 87 GOTO 100
* 95 Y=Y-1: IF Y=-1 THEN 500
* 100 IF Z(X+60*Y)>0 THEN 500
* 110 DRAW X,Y
* 120 B=ASCIKEY: IF B=50; IF A≠2; A=4
* 130 IF B=54; IF A≠3; A=1
* 140 IF B=56; IF A≠4; A=2
* 150 IF B=52; IF A≠1; A=3
* 155 Z(X+60*Y)=A
* 160 IF X=E; IF Y=F THEN 30
* 170 DRAWC C,D: H=C+60*D: GOTO 170+Z(H)*10
* 180 Z(H)=0: C=C+1: GOTO 60
* 190 Z(H)=0: D=D+1: GOTO 60
* 200 Z(H)=0: C=C-1: GOTO 60
* 210 Z(H)=0: D=D-1: GOTO 60
* 500 PRINT "Game over. score-";G
* 510 INPUT "Repeat",$:IF $="Y" THEN 10
* 520 DEFM 0