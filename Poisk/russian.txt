Поиск

Год:	1991
ОЗУ:	128 - 512 кБ
ПЗУ:	8 кБ
Проц:	К1810ВМ88 5 MГц
Видео:	320x200x4, 560x200x3, 640x200x2
Звук:	К580ВИ53
Группа:	IBM PC

Поиск это IBM PC-совместимый советский домашний компьютер. Его особенность это
эмуляция текстовых видеорежимов. Видеоадаптер этого компьютера не поддерживает
текстовые видеорежимы.

Перед советскими инженерами поставили задачу создать максимально простой
компьютер способный выполнять программы для IBM PC. C материнской платой и
контроллером дисковода всё достаточно просто. Почти все программы обращаются к
контроллеру дисковода через операционную систему или BIOS. Можно не создавать
100% копию IBM PC. А вот с видеоадаптером всё плохо. Операционная система
MS DOS не позволяла работать с графикой. Она не выступала посредником между
программой и оборудованием. Сейчас этим занимается подсистема DirectX или GDI в
Windows, а раньше любая программа должна была напрямую обращаться к
видеоадаптеру.

Видеоадаптер CGA, являвшийся стандартом IBM PC, был больше и сложнее других
видеоадаптеров. Удивительно то, что его графические возможности были хуже других
видеоадаптеров. В нем не было никакого ускорения графики, не было спрайтов, не
было прокрутки экрана, не было произвольной палитры, не было возможности
загрузить собственный шрифт. А тот минимум функциональности, что был сделан, был
сделан не без изъянов. Текстовый режим 80x25 16 цветов выводится с помехами
(т.н. снег), а графические режимы имели черезстрочную адресацию. Это из-за
примитивности используемой микросхемы MC6845.

Микросхема MC6845 формирует адрес чтения из видеопамяти и синхросигналы для
монитора. Это универсальная микросхема с множеством настроек. Настройки нужны,
что бы настроить микросхему под любой компьютер, под разрешение экрана этого
компьютера, под тактовые частоты, под определенный стандарт мониторов. Конкретно
в CGA корректных сочетаний настроек микросхемы MC6845 было не много: ширина
экрана 640 или 320 точек, высота шрифта 2, 4 или 8 точек. Введя некорректные
настройки можно было даже повредить монитор. Иногда встречались мониторы у
которых при снижении частоты строк значительно увеличивалось высокое напряжение,
что приводило к повреждению монитора. Программистам не стоило самим лезть в
настройки микросхем. Планировалось, что для настройки программисты будут
использовать стандартные функции видео BIOS. Но раз есть возможность влезть, то
программисты будут лезть. Тем более, что фирма IBM не все возможности
видеоадаптера сделала доступными через BIOS. Программист через BIOS мог включить
текстовые режимы 40x25, 80x25, графические режимы 320x200x4, 640x200x2. А как
минимум два шикарных графических режима 160x100x16 и 640x200x16 NTSC они забыли.
А ведь видеоадаптер CGA способен отобразить даже 160x100 1024 цвета на NTSC
телевизоре. Так же они забыли вынести возможность регулировки положения
изображения на экране, которая очень полезна в играх. Поэтому программисты сами
настраивали оборудование и поэтому микросхема MC6845 стала неотъемлемой частью
IBM PC. Не нужной усложняющей неотъемлемой частью.

Разработчики компьютера "Поиск" решили обойтись без микросхемы MC6845. Решили
сделать видеоадаптер как в большинстве 8 битных компьютеров: ряд счетчиков, ряд
мультиплексоров, общее для видеоадаптера и процессора ОЗУ. Регистры микросхемы
MC6845 эмулировали программно. Когда программа обращается к регистрам, то
происходит немаскируемое прерывание, запускается подпрограмма BIOS, которая и
выполняет нужную работу.

Разработчики не стали устанавливать на печатную плату детали для аппаратного
текстового режима. Когда программа обращается к текстовой видеопамяти (0xB8000
и далее), то происходит немаскируемое прерывание, запускается подпрограмма BIOS,
которая рисует в графической видеопамяти (0xA0000 и далее) символ. Разработчики
не стали ставить отдельный микроконтроллер на клавиатуру, сканированием
клавиатуры занимается центральный процессор.

В итоге получился недорогой компьютер, не значительно сложнее 8 битных
компьютертов, способный выполнять программы для IBM PC. Компьютер получился
медленнее оригинала из-за общей для видеоадаптера и процессора памяти. Из-за
упрощений в схеме. Из-за необходимости в текстовом режиме программно рисовать
символы. Если программа часто обращалась к регистрам CGA, то скорость падала еще
сильнее. Ну и некоторые игры не видели клавиатуру Поиска. Или просто блокировали
работу подпрограммы BIOS обслуживающей клавиатуру.

Текстовый режим 40x25x16 по настоящему был графическим режимом 320x200x4,
поэтому вместо 16 цветов пользователь видел лишь 4 цвета. А текстовый режим
80x25x16 по настоящему был графическим режимом 640x200x2. Или 560x480x3. Это
новый видеорежим. В области 8x1 пикселей первая точка всегда черная, а остальные
7 точек могут быть черными/белыми или черными/розовыми на выбор.

Компьютеры продавались со встроенным объемом оперативной памяти 128 или 512
килобайт. Для модели 128 килобайт можно было докупить внешний модуль расширения
памяти на 256 или 512 килобайт. Докупив контроллер дисковода можно пользоваться
операционной системой MS DOS и множеством программ для неё. И даже MS Windows.

ПЗУ компьютера "Поиск" содержит только BIOS. После включения компьютер может
только лишь загрузить программу с магнитной ленты или внешнего ПЗУ. При
установке контроллера дисковода, компьютер загружается с дискеты.
